# Огляд мікроконтролерів для початківців: з чого і як стартувати?

## Основні платформи, доступні на нашому ринку.

### Arduino

Сам я не працював з цим залізом, тому можу описати його хіба згідно прочитаного-почутого.

Плюси:
* широта і доступність екосистеми (зокрема, і деякі плати STM32 були свого часу сертифіковані і розповсюджувались під маркою Arduino);
* низький поріг входження для малококваліфікованих новачків — набори-конструктори і керівництва, орієнтовані на непрофесіоналів (здається, саме Arduino було першопроходцем просування робототехніки в маси). 

Мінуси:
* багато хто нарікає на Arduino IDE — зокрема, рішати там якісь нетривіяльні проблеми може виявитись складніше, ніж деинде;
* якщо ж працювати з цим набором заліза через універсальні фреймворки, то він не видається чимось кращим і особливим на загальному тлі — хіба коштує місцями дорожче за инших, так що навряд чи є сенс розглядати його як елемент серйозних розробок (радше, як пишуть, "зручний радіоконструктор для швидкої розробки електронних пристроїв").

Інструменти розробки:
* Arduino IDE — від початку це була спеціялізована платформа, яка зараз дозволяє працювати і з ширшим набором заліза;
* Platformio — універсальний фреймворк, на якому можна працювати з усіма популярними апаратними платформами;
* є й инші інструменти (наче, менш популярні), не можу тут охарактеризувати аж всі.

Варто зауважити, що Arduino-проєкти порівняно не складно імпортуються в середовище Platformio, оскільки Platformio, серед иншого, підтримує бібліотеки з фреймворку Arduino. Отже, конвертації потребує тільки загальний файл опису проєкту: https://community.platformio.org/t/moving-from-arduino-ide-to-platformio-ide/42372


### ESP32

Плюси:
* дешевизна, широта і універсальність екосистеми;
* зокрема WiFi, Bluetooth — ці інтерфейси доступні "з коробки" навіть на найдешевших платах з ESP32;
* це платформа мікроконтролерів, орієнтована на фахове застосування, не конструктор для початківців :-)

Мінуси:
* це Китай, що зупиняє деяких виробників у використанні цього (концепція "china-free" задля убезпечнення проєкту від ризиків китайського технологічного і економічного впливу);
* фахівці, буває, серйозно нарікають на рішення від ESP.

Інструменти розробки:
* Espressif IDE — спеціялізована платформа (Eclipse plugin, VS Code extension);
* Platformio — універсальний фреймворк (заявлено, що ESP припинило підтримку Platformio, але Platformio цілком справляється);
* Arduino IDE, инші універсальні фреймворки.

Платформа ESP32 включає в себе декілька різних типів процесорів, код між якими не переноситься безшовно (можливі дуже навіть болючі нюанси). Тому при початковому виборі конкретного процесора варто уважно вичитувати порівняльні таблиці.

Доступні макетні плати на основі ESP32 від різних виробників і їх якість не завжди однакова — при плануванні серійного виробництва це варто перевіряти наперед.


### STM32

Плюси:
* особлива широта і універсальність рішень — від геть дешевих до дуже і дуже серйозних (тільки на STM32F4 ми свого часу знайшли АЦП на 7.2 мегасемпла (3 * 2.4) за розумні гроші, хоч якість його роботи і виявилась далеко не найкращою);
* код між дешевшими і дорожчими серіями процесорів STM32 переноситься, по відчуттю, не так драматично, як між різними серіями ESP32, але варто мати на увазі, що спеціялізована бібліотека CMSIS, на якій побудовано стандартні приклади для молодших серій STM32, від початку не була доступна старшій серії STM32H, там слід працювати з бібліотекою HAL; бачу якесь community-рішення — https://github.com/Open-CMSIS-Pack/STM32H7xx_DFP — але це точно не фірмовий стандарт);
* це европейський розробник.
  
Мінуси:
* фахівці вважають якість рішень від STM32 гіршою, ніж якість рішень від "дорожчих" виробників на кшталт NXP чи Texas Instruments (сам я мав нагоду порівняти якість роботи АЦП на STM32F4Discovery, де графік випадковим чином хитало на +-2% від максимального значення, і АЦП на иншому мікроконтролері, де графік був чистий і рівний);
* на платах від STM32 нема WiFi (принаймні, на тих, які виглядають доступно по ціні), ось, для прикладу, обговорення цього —
https://community.st.com/t5/stm32-mcus-wireless/stm32-and-wifi/m-p/606978#M16900 (фахівці кажуть, що для роботи з WiFi на STM32 найкраже буде приєднати туди копієчну плату ESP32, на якій є WiFi).

Інструменти розробки:
* STM32Cube — спеціялізована платформа (Eclipse);
* Eclipse з плагінами, які є в загальних Eclipse-репозиторіях;
* Platformio, Arduino IDE, инші універсальні фреймворки.


### Paspberry Pi Pico

Сам я не працював з цим залізом, тому можу описати його хіба згідно прочитаного-почутого.

Плюси:
* вбудовані функції захисту;
* це Европейський розробник.

Мінуси:
* вочевидь, ця платформа менш популярна на наших теренах, а це про щось та й свідчить.


### Инші платформи

На загал, вони дорожчі і, кажуть, більш якісні, ніж ESP32/STM32. Я, наприклад, чув добрі фахові відгуки про мікроконтролери NXP і Texas Instruments.


## Альтернатива??? Мікрокомпʼютери під Linux.

Для багатьох задач добрим рішенням буде не мікроконтролер, а мікрокомпʼютер типу Raspberry Pi чи Orange Pi — на них, стандартно, є набір пінів GPIO, до яких можна приєднувати таку ж периферію, як і до мікроконтролерів. 

Плюси:
* стандартне операційне середовище — Linux — звільняє від багатьох проблем :-)
* як правило, основні компʼютерні інтерфейси доступні "з коробки" — WiFi, Bluetooth, LAN, USB, UART, SD, порт для монітора;
* ресурси памʼяти і швидкодія, як правило, істотно вищі, ніж на мікроконтролерах; в якості верхньої межі розглядаю STM32H743 — 400 МГц (є ще STM32 N-серія на 800 МГц, але взагалі не бачу, як їх купити в Україні), в той же час найпростіша Raspberry Pi Zero стартує з 1 ГГц.

Мінуси:
* стандартне операційне середовище — Linux — це не real-time, тому рішення дуже високочастотних задач може виявитись істотно складнішим, ніж на мікроконтролері;
* багато елементів, стандартних для девбордів — PWM, ADC, DAC, SPI, I2C — бувають відсутні на мікрокомпʼютерах (але їх можна додавати через GPIO і, зрештою, є моделі, де вони й знайдуться);
* ціна дещо вища, ніж на мікроконтролери.

Інструментарій:
* стандартні десктопні IDE (VS Code, IntelliJ тощо) і тулчейни (C/C++, Rust, Golang, Python чи будь-що инше, аби там були бібліотеки для необхідних апаратних інтерфейсів — GPIO тощо).


## Порівняння цін


## MicroPython


## Універсальні IDE 

* Platformio (Arduino, бібліотеки ESP, бібліотеки STM32 та багато иншого). Можливі проблеми з установкою, як у всякого великого сучасного фреймворка :-( Але якщо установка прошла — далі мало би бути, на загал, більш-менш гладко.

* Eclipse
* Keil 


## Community-проєкти

* ELRS - Platformio (VS Code or IntelliJ) 
* Ardupilot - Eclipse, VS Code
* Betaflight - Eclipse, VS Code (VS Code зі старту не захотів підтягувати інклюди, тому я користуюсь Eclipse) 

Універсальні проєкти обвішані define'ами :-(


